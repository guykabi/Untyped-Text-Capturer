chrome.runtime.onInstalled.addListener((function(){chrome.contextMenus.create({title:"Copy Captured Text",contexts:["all"],id:"capturedT"})})),chrome.runtime.onMessage.addListener((function(e,t,r){"Start"===e.message&&r("OK")})),chrome.contextMenus.onClicked.addListener((function(e,t){var r,n,o;r=t.id,n={copy:"Copy"},chrome.tabs.sendMessage(r,{ping:!0},(function(e){e&&e.pong?chrome.tabs.sendMessage(r,n,o):(console.log("Injecting script programmatically"),chrome.scripting.executeScript({target:{tabId:r,allFrames:!0},files:["contentScript.js"]},(function(){if(chrome.runtime.lastError)throw console.error(chrome.runtime.lastError),Error("Unable to inject script into tab "+r);chrome.tabs.sendMessage(r,n,o)})))}))}));