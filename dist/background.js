(()=>{function e(e,t,n){chrome.tabs.sendMessage(e,{ping:!0},(function(o){o&&o.pong?chrome.tabs.sendMessage(e,t,n):(console.log("Injecting script programmatically"),chrome.scripting.executeScript({target:{tabId:e,allFrames:!0},files:["contentScript.js"]},(function(){if(chrome.runtime.lastError)throw console.error(chrome.runtime.lastError),Error("Unable to inject script into tab "+e);console.log("Sending msg now"),chrome.tabs.sendMessage(e,t,n)})))}))}chrome.runtime.onInstalled.addListener((function(){chrome.contextMenus.create({title:"Copy Captured Text",contexts:["all"],id:"capturedT"})})),chrome.runtime.onMessage.addListener((function(e,t,n){"Start"===e.message&&n("OK")})),chrome.tabs.onUpdated.addListener((function(t,n,o){"complete"===o.status&&setTimeout((function(){e(t,{start:"startttt"})}),8e3)})),chrome.contextMenus.onClicked.addListener((function(t,n){e(n.id,{copy:"Copy"})}))})();